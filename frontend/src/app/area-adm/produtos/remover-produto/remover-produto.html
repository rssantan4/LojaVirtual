<app-navbar-interno-adm></app-navbar-interno-adm>

<!-- Mensagem de sucesso -->
<div class="alert-sucesso" *ngIf="mensagemSucesso">
  <mat-icon>check_circle</mat-icon>
  {{ mensagemSucesso }}
  <button
    mat-icon-button
    class="close-msg"
    (click)="mensagemSucesso = null">
    <mat-icon>close</mat-icon>
  </button>
</div>

<div class="container-remover">

  <h2>Remover Produto</h2>

  <!-- Buscar -->
  <mat-form-field appearance="outline" class="campo-busca">
    <mat-label>Buscar produto</mat-label>
    <input
      matInput
      placeholder="Digite o nome do produto"
      [(ngModel)]="buscaProduto"
      (input)="filtrarProdutos()"
    />
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  <!-- Spinner -->
  <div *ngIf="loadingProdutos" class="loading-spinner">
    <mat-spinner></mat-spinner>
  </div>

  <!-- Lista -->
  <div
    class="lista-produtos"
    *ngIf="!loadingProdutos && produtosFiltrados.length > 0"
  >
    <div class="produto-item" *ngFor="let produto of produtosFiltrados">

      <img
        [src]="produto.imagemUrl"
        alt="Imagem"
        class="produto-img"
      />

      <div class="produto-info">
        <h3>
          {{ produto.nome }}
          <span *ngIf="produto.ativo === false" class="badge-desativado">
            DESATIVADO
          </span>
        </h3>

        <p><strong>Artista:</strong> {{ produto.artista }}</p>
        <p><strong>Preço:</strong> R$ {{ produto.preco | number:'1.2-2' }}</p>
        <p><strong>Gênero:</strong> {{ produto.generoMusical?.nome }}</p>
        <p><strong>Estoque:</strong> {{ produto.estoque }}</p>
      </div>

      <button
        mat-raised-button
        color="warn"
        class="button-color"
        (click)="abrirConfirmacao(produto)"
        [disabled]="produto.ativo === false"
      >
        Remover
      </button>

    </div>
  </div>

  <!-- Nenhum resultado -->
  <p class="nenhum" *ngIf="buscaProduto && produtosFiltrados.length === 0">
    Nenhum produto encontrado.
  </p>
<br> <br> <br> <br> <br> <br>  <br><br><br><br><br>
</div>
